$(document).ready(function(){function e(e){for(arr=[],i=1;i<13;i++)e[i.toFixed(1)]?arr.push(e[i.toFixed(1)]):arr.push(0);return arr}function o(){"chests"===$("meta[name=psj]").attr("controller")&&(0!=d.length&&0!=s.length&&0!=c.length&&($("#timesUp").modal({backdrop:"static"}),$("#timesUpModalTitle").text("Session Ended!")),r(a),t(a))}function r(o){guides_history=e(o.guides),explores_history=e(o.explores);const r=document.getElementById("myChart");if(r){const e=r.getContext("2d");r.height=80,new Chart(e,{type:"line",data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{label:"Guides",backgroundColor:"rgba(237, 231, 246, 0.5)",borderColor:"#673ab7",pointBackgroundColor:"#512da8",borderWidth:2,data:guides_history},{label:"Explores",backgroundColor:"rgba(232, 245, 233, 0.5)",borderColor:"#4caf50",pointBackgroundColor:"#388e3c",borderWidth:2,data:explores_history}]},options:{legend:{display:!1}}})}}function t(e){var o={};for(i=0;i<e.region_values.length;i++)x=e.region_values[i],o[Object.keys(x)[0]]=x[Object.keys(x)[0]];$("#world-map-marker").length>0&&($("#vmap").remove(),$("#world-map-marker").append('\n        <div\n          id="vmap"\n          style="\n            height: 490px;\n            position: relative;\n            overflow: hidden;\n            background-color: transparent;\n          "\n        >\n        </div>\n      '),$("#vmap").vectorMap({map:"world_mill",backgroundColor:"#fff",borderColor:"#fff",borderOpacity:.25,borderWidth:0,color:"#e6e6e6",regionStyle:{initial:{fill:"#e4ecef"}},markerStyle:{initial:{r:7,fill:"#fff","fill-opacity":1,stroke:"#000","stroke-width":1,"stroke-opacity":.4}},markers:e.markers,series:{regions:[{values:o,scale:["#03a9f3","#02a7f1"],normalizeFunction:"polynomial"}]},hoverOpacity:null,normalizeFunction:"linear",zoomOnScroll:!1,scaleColors:["#b6d6ff","#005ace"],selectedColor:"#c9dfaf",selectedRegions:[],enableZoom:!1,hoverColor:"#fff"}))}function n(e,o,r){var t;return function(){var n=this,a=arguments,l=function(){t=null,r||e.apply(n,a)},i=r&&!t;clearTimeout(t),t=setTimeout(l,o),i&&e.apply(n,a)}}var a,l=n(o,250);$(document).on("turbolinks:load",l),l(),$.ajax({type:"GET",url:"/chests.json",success(e){a=e},async:!1});var d=document.getElementById("booking_id").value,s=document.getElementById("peer_user_id").value,c=document.getElementById("current_user_id").value});